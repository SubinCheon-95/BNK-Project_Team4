<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>BNKë¶€ì‚°ì€í–‰::ì…ë ¥ ì •ë³´ í™•ì¸</title>

    <link rel="stylesheet" th:href="@{/css/common/style_common.css}">
    <link rel="stylesheet" th:href="@{/css/common/style_font.css}">
    <link href="//cdn.jsdelivr.net/xeicon/2/xeicon.min.css" rel="stylesheet">
    
    <style>
        /* ê³ ê°ë‹˜ì´ ì£¼ì‹  ê³µí†µ ìŠ¤íƒ€ì¼ (ì´ì „ê³¼ ë™ì¼) */
        :root {
            --red-900: #D03238; /* ë©”ì¸ ì»¬ëŸ¬ (ë¹¨ê°•) */
            --red-700: #E1545A;
            --red-100: #FAE5E6; /* ì—°í•œ ë¹¨ê°• */
            --blue-500: #007bff; /* ëª¨ë‹¬ ë‚´ í† ê¸€ ë²„íŠ¼ì˜ ê¸°ë³¸ íŒŒë€ìƒ‰ (ë¯¸ì‚¬ìš©) */
            --blue-50: #e7f4ff; /* ëª¨ë‹¬ ë‚´ í† ê¸€ ë²„íŠ¼ì˜ ê¸°ë³¸ ì—°í•œ íŒŒë€ìƒ‰ (ë¯¸ì‚¬ìš©) */
            --blue-700: #0056b3; /* ëª¨ë‹¬ ë‚´ í† ê¸€ ë²„íŠ¼ì˜ ê¸°ë³¸ ì§„í•œ íŒŒë€ìƒ‰ (ë¯¸ì‚¬ìš©) */
            --white: #ffffff;
            --grey-900: #333333;
            --grey-700: #666666;
            --grey-500: #B9B9B9;
            --grey-400: #B0B0B0;
            --grey-300: #DEDEDE;
            --grey-100: #F8F8F8;
            --container: 1200px;
        }
        * { box-sizing: border-box }
        
        /* ... (ì´ì „ STEP 2ì˜ ê³µí†µ ìŠ¤íƒ€ì¼ (util, gnb, content-area ë“±)ì€ ì—¬ê¸°ì— í¬í•¨ë˜ì–´ ìˆë‹¤ê³  ê°€ì •) ... */

        .content-area { 
            min-height: 60vh; 
            padding: 50px 0; 
            display: flex;
            justify-content: center; 
        }
        
        .review-wrap {
            width: 800px; /* STEP 2ì™€ ë™ì¼í•œ ë„ˆë¹„ */
        }
        
        .title-step { color: var(--red-900); font-size: 1.1rem; font-weight: 700; margin-bottom: 10px; }
        .title-main { font-size: 2rem; font-weight: 700; line-height: 1.4; margin-bottom: 40px; color: var(--grey-900); }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--grey-900);
            margin-bottom: 20px;
            padding-top: 40px;
            border-top: 1px solid var(--grey-300);
        }
        .section-title:first-of-type { border-top: none; padding-top: 0; }
        
        /* ---------------------------------- */
        /* 1. ì…ë ¥ ì •ë³´ í™•ì¸ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        /* ---------------------------------- */
        .info-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1rem;
            margin-bottom: 30px;
        }
        .info-table th, .info-table td {
            padding: 15px 0;
            border-bottom: 1px solid var(--grey-300);
        }
        .info-table th {
            text-align: left;
            width: 30%;
            color: var(--grey-700);
            font-weight: 500;
        }
        .info-table td {
            text-align: right;
            font-weight: 600;
            color: var(--grey-900);
        }
        .info-table td.highlight {
             color: var(--red-900);
             font-weight: 700;
        }
        .info-table .text-link {
            font-size: 0.9rem;
            color: var(--red-900);
            cursor: pointer;
            margin-left: 10px;
        }

        /* ---------------------------------- */
        /* 2. ì´í•´ í™•ì¸ ê·¸ë£¹ ìŠ¤íƒ€ì¼ (ë©”ì¸ í˜ì´ì§€) */
        /* ---------------------------------- */
        .check-group {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid var(--grey-300);
            border-radius: 8px;
        }
        .check-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px dashed var(--grey-300);
        }
        .check-item:last-of-type { border-bottom: none; }
        .check-item-label {
            font-size: 1rem;
            color: var(--grey-900);
            font-weight: 600;
        }
        .check-item-action {
            display: flex;
            gap: 10px;
        }
        
        /* ë©”ì¸ í˜ì´ì§€ í† ê¸€ ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .check-group .toggle-btn {
            padding: 8px 15px;
            border: 1px solid var(--grey-500);
            border-radius: 5px;
            background-color: var(--white);
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--grey-700);
            transition: all 0.2s;
        }
        /* ğŸš¨ ë©”ì¸ í˜ì´ì§€ í† ê¸€ ë²„íŠ¼ ì„ íƒ ì‹œ ìŠ¤íƒ€ì¼ (ë¹¨ê°• ê°•ì¡°) ğŸš¨ */
        .check-group .toggle-btn.selected {
            border-color: var(--red-900);
            background-color: var(--red-100);
            color: var(--red-900);
        }

        /* ---------------------------------- */
        /* 3. ì „ìì„œëª… ë° ìµœì¢… ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        /* ---------------------------------- */
        .sign-area {
            text-align: center;
            padding: 40px 0;
        }
        .sign-button {
            padding: 15px 30px;
            background-color: var(--grey-900);
            color: var(--white);
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            margin-bottom: 20px;
        }
        .sign-info {
            font-size: 0.9rem;
            color: var(--grey-700);
        }
        
        /* í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ (STEP 2ì™€ ë™ì¼) */
        .button-area {
            display: flex;
            justify-content: space-between;
            padding-top: 40px;
        }
        .btn-prev {
            width: 30%;
            padding: 15px 0;
            border: 1px solid var(--grey-300);
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--grey-900);
            background-color: var(--white);
            cursor: pointer;
        }
        .btn-next {
            width: 65%;
            padding: 15px 0;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--white);
            background-color: var(--red-900);
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn-next:disabled {
            background-color: var(--grey-300);
            cursor: not-allowed;
        }

        /* ---------------------------------- */
        /* ëª¨ë‹¬ íŒì—… ìŠ¤íƒ€ì¼ */
        /* ---------------------------------- */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
        .modal-content { background-color: var(--white); margin: auto; padding: 30px; border-radius: 10px; width: 90%; max-width: 750px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); position: relative; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--grey-300); padding-bottom: 15px; margin-bottom: 20px; }
        .modal-header h2 { font-size: 1.5rem; font-weight: 700; color: var(--grey-900); }
        .close-btn { color: var(--grey-500); font-size: 2rem; font-weight: bold; cursor: pointer; transition: color 0.2s; }
        .modal-body { max-height: 85vh; overflow-y: auto; padding-right: 15px; line-height: 1.6; font-size: 0.95rem; color: var(--grey-700); }
        .modal-body strong { color: var(--red-900); font-weight: 700; }

        /* ì „ìì„œëª… ëª¨ë‹¬ ë³¸ë¬¸ ìŠ¤íƒ€ì¼ */
        .contract-preview {
            border: 1px solid var(--grey-300);
            padding: 15px;
            background-color: var(--grey-100);
            max-height: 55vh; 
            overflow-y: auto;
            margin-bottom: 20px;
        }
        .contract-preview h3 { font-size: 1.1rem; color: var(--grey-900); margin-bottom: 10px; }
        .contract-content { font-size: 0.85rem; color: var(--grey-700); line-height: 1.4; white-space: pre-wrap; }
        .confirm-question { font-size: 1.1rem; color: var(--grey-900); font-weight: 600; margin-bottom: 15px; }

        .modal-footer { padding-top: 20px; text-align: center; display: flex; justify-content: space-between; gap: 10px; }
        .modal-footer button { padding: 12px 25px; border: none; border-radius: 6px; font-size: 1rem; font-weight: 700; cursor: pointer; flex-grow: 1; }
        .modal-footer .btn-secondary { background-color: var(--grey-300); color: var(--grey-900); }
        .modal-footer .btn-primary { background-color: var(--red-900); color: var(--white); }
        
        /* ëª¨ë‹¬ ë‚´ ìµœì¢… ë™ì˜ í† ê¸€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ê³„ì•½ì„œ í•˜ë‹¨) */
        #modalAgreement {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        #modalAgreement .toggle-btn {
            padding: 10px 20px;
            border: 1px solid var(--grey-400); 
            background-color: var(--white);
            color: var(--grey-700);
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.2s;
            flex-grow: 1; 
            font-weight: 500;
        }
        /* ğŸš¨ ëª¨ë‹¬ ë‚´ ìµœì¢… ë™ì˜ í† ê¸€ ë²„íŠ¼ ì„ íƒ ì‹œ ìŠ¤íƒ€ì¼ (ë¹¨ê°• ê°•ì¡°) ğŸš¨ */
        #modalAgreement .toggle-btn.selected {
            border-color: var(--red-900);
            background-color: var(--red-100);
            color: var(--red-900);
            font-weight: 700;
            box-shadow: 0 0 0 1px var(--red-900) inset; 
        }

        /* ê³„ì•½ì„œ ë‚´ì˜ "ì˜ˆ/ì•„ë‹ˆì˜¤"ëŠ” ë‹¨ìˆœ í…ìŠ¤íŠ¸ì´ë¯€ë¡œ ì‹œê°ì  ë³€ê²½ í•„ìš” ì—†ìŒ */
    </style>
</head>

<body>
    <section>
        <article class="util">...</article>
        <article class="gnb">...</article>
        <article class="gnb_sub">
            <div class="container gnb_sub_row">
                <a href="#" class="breadcrumb">ì˜ˆê¸ˆìƒí’ˆ<i class="xi-angle-right-min"></i></a>
                <a href="#" class="breadcrumb">ê°€ì…í•˜ê¸°</a>
            </div>
        </article>
    </section>

    <section class="container content-area">
        <div class="review-wrap">
            <p class="title-step">STEP 3/4</p>
            <h2 class="title-main">ì…ë ¥í•˜ì‹  ì •ë³´ì™€ ê³„ì•½ ë‚´ìš©ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</h2>

            <form id="reviewForm">
                <h3 class="section-title">ì…ë ¥í•˜ì‹  ì •ë³´ í™•ì¸</h3>
                <table class="info-table">
                    <tr>
                        <th>ì¶œê¸ˆ ê³„ì¢Œ</th>
                        <td>ì‹ í•œ 110-123-123456 <span class="text-link" onclick="alert('STEP 2ë¡œ ì´ë™í•˜ì—¬ ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.')">ìˆ˜ì •</span></td>
                    </tr>
                    <tr>
                        <th>ê°€ì… ê¸ˆì•¡</th>
                        <td>500,000ì›</td>
                    </tr>
                    <tr>
                        <th>ê°€ì… ê¸°ê°„</th>
                        <td>1ê°œì›” (2025.12.10 ë§Œê¸°)</td>
                    </tr>
                    <tr>
                        <th>ê³¼ì„¸ ìœ í˜•</th>
                        <td>ì¼ë°˜ê³¼ì„¸</td>
                    </tr>
                    <tr>
                        <th>ì´ì ì§€ê¸‰ ë°©ë²•</th>
                        <td>ë§Œê¸° ì¼ì‹œ ì§€ê¸‰-ë‹¨ë¦¬ì‹</td>
                    </tr>
                    <tr>
                        <th>ì ìš© ì´ìœ¨</th>
                        <td class="highlight">ì—° 2.35%</td>
                    </tr>
                    <tr>
                        <th>ìƒí’ˆ ë§Œê¸° ì•Œë¦¼</th>
                        <td>ì‹ ì²­ (ì¹´ì¹´ì˜¤í†¡/ë¬¸ìë©”ì„¸ì§€)</td>
                    </tr>
                </table>

                <h3 class="section-title">ì¶©ë¶„íˆ ì´í•´í•˜ì…¨ë‚˜ìš”?</h3>
                <div class="check-group">
                    <div class="check-item" data-check="check1">
                        <span class="check-item-label">
                            ë§Œê¸°ì¼ ì „ì— ì¤‘ë„í•´ì§€í•˜ë©´ ì•½ì • ì´ììœ¨ì´ ì•„ë‹Œ <br/>
                            **ì¤‘ë„í•´ì§€ ì´ììœ¨ì´ ì ìš©ë¨**ì„ ì´í•´í•˜ì…¨ë‚˜ìš”?
                        </span>
                        <div class="check-item-action toggle-group">
                            <button type="button" class="toggle-btn" data-value="Y">ì˜ˆ</button>
                            <button type="button" class="toggle-btn" data-value="N">ì•„ë‹ˆìš”</button>
                        </div>
                    </div>
                    
                    <div class="check-item" data-check="check2">
                        <span class="check-item-label">
                            ìµœì¢… ì ìš© ì´ììœ¨ì€ ë§Œê¸° ì‹œì ì— í™•ì •ëœ <br/>
                            **ìš°ëŒ€ì´ììœ¨ì— ë”°ë¼ ë‹¬ë¼ì§**ì„ ì´í•´í•˜ì…¨ë‚˜ìš”?
                        </span>
                        <div class="check-item-action toggle-group">
                            <button type="button" class="toggle-btn" data-value="Y">ì˜ˆ</button>
                            <button type="button" class="toggle-btn" data-value="N">ì•„ë‹ˆìš”</button>
                        </div>
                    </div>
                </div>

                <h3 class="section-title">ì˜ˆê¸ˆìƒí’ˆê³„ì•½ì„œ ì „ìì„œëª…</h3>
                <div class="sign-area">
                    <button type="button" id="signButton" class="sign-button" data-modal-target="signatureModal">
                        ì „ìì„œëª… ëŒ€ì‹ , ê³„ì•½ì„œ í™•ì¸í•˜ê³  ê°€ì…í•˜ê¸°
                    </button>
                    <p id="signStatus" class="sign-info">
                        **[í•„ìˆ˜]** ìœ„ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê³„ì•½ì„œ ë‚´ìš©ì„ í™•ì¸í•˜ê³  ë™ì˜í•´ì£¼ì„¸ìš”.
                    </p>
                </div>


                <div class="button-area">
                    <button type="button" class="btn-prev" onclick="history.back()">ì´ì „ (STEP 2ë¡œ)</button>
                    <button id="btnNext" class="btn-next" type="submit" disabled>ê°€ì… ì™„ë£Œ</button>
                </div>
            </form>
        </div>
    </section>

    <div id="signatureModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>ì „ìì„œëª… ëŒ€ì‹ , ì•„ë˜ ë‚´ìš©ì„ í™•ì¸í•˜ê³ </h2>
            <span class="close-btn" data-modal-close="signatureModal">&times;</span>
        </div>

        <div class="modal-body">
            <div class="contract-preview">
                <div class="contract-header" style="text-align: center; margin-bottom: 15px;">
                    <h3 style="font-size: 1.1rem; font-weight: 700; color: var(--grey-900); margin-bottom: 5px;">[ì˜ˆê¸ˆìƒí’ˆ ê³„ì•½ì„œ]</h3>
                    <span style="font-size: 0.9rem; color: var(--grey-500);">ì‹ í•œì€í–‰ ì¤€ë²•ê°ì‹œì¸ ì‚¬ì „ì‹¬ì‚¬í•„ ì œ2022-4</span>
                </div>

                <table style="width: 100%; border-collapse: collapse; font-size: 0.95rem; margin-bottom: 20px;">
                    <tbody style="border: 1px solid var(--grey-300);">
                        <tr>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ìƒí’ˆëª… (ì—…ì²´ëª…)</th>
                            <td colspan="3" style="width: 75%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">ì‹ í•œ Myí”ŒëŸ¬ìŠ¤ ì •ê¸°ì˜ˆê¸ˆ (ì‹ í•œì€í–‰)</td>
                        </tr>
                        <tr>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ì‹ ê·œ ê¸ˆì•¡</th>
                            <td style="width: 25%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">500,000ì›</td>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ê³„ì•½ ê¸°ê°„</th>
                            <td style="width: 25%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">1ê°œì›”</td>
                        </tr>
                        <tr>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ìë™ ì´ì²´ ê³„ì¢Œ</th>
                            <td style="width: 25%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">-</td>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ì´ì ì£¼ê¸° ë° ë‚©ì…ì¼</th>
                            <td style="width: 25%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">-</td>
                        </tr>
                        <tr>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ìµœì´ˆ ì‹ ê·œ ì ìš© ì´ìœ¨</th>
                            <td style="width: 25%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">ì—° 2.35%</td>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ì´ì ì§€ê¸‰ ë°©ì‹</th>
                            <td style="width: 25%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">ë§Œê¸°ì¼ì‹œì§€ê¸‰ ë‹¨ë¦¬ì‹</td>
                        </tr>
                        <tr>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ê³¼ì„¸ êµ¬ë¶„</th>
                            <td style="width: 25%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">ì¼ë°˜ê³¼ì„¸</td>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ìœ ì˜ì‚¬í•­</th>
                            <td style="width: 25%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">ìœ </td>
                        </tr>
                        <tr>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ê³„ì•½ ì²´ê²°ì¼</th>
                            <td style="width: 25%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">2025.11.10</td>
                            <th style="width: 25%; background-color: #f0f0f0; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-700); font-weight: 500;">ì—°ê²° ê³„ì¢Œ (ìë™í•´ì§€ ì‹œ)</th>
                            <td style="width: 25%; border: 1px solid var(--grey-300); padding: 8px 10px; text-align: center; color: var(--grey-900);">110-123-123456</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="contract-section">
                    <h4 style="font-size: 1rem; font-weight: 700; color: var(--grey-900); margin-top: 15px; margin-bottom: 10px;">â–  ì˜ˆê¸ˆìƒí’ˆ ê³„ì•½ ì²´ê²°ì— ê´€í•œ ì‚¬í•­</h4>
                    <p style="font-size: 0.9rem; color: var(--grey-700); line-height: 1.6; margin-bottom: 15px;">â€» ì¶©ë¶„í•œ ì´í•´ ì—†ì´ ë‹µë³€í•˜ëŠ” ê²½ìš° ì¶”í›„ ì†Œì†¡ì´ë‚˜ ë¶„ìŸ ë°œìƒ ì‹œ ë³¸ì¸ì—ê²Œ ë¶ˆë¦¬í•˜ê²Œ ì‘ìš©í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì§ˆë¬¸ì— ë‹µí•´ ì£¼ì‹­ì‹œì˜¤.</p>
                    
                    <table style="width: 100%; border: 1px solid var(--grey-300);">
                        <tr>
                            <td style="width: 70%; border-right: 1px solid var(--grey-300); padding: 8px 10px;">ë³¸ì¸ì€ ìœ„ ì˜ˆê¸ˆìƒí’ˆì˜ ì¤‘ìš”í•œ ì‚¬í•­ì„ ì¶©ë¶„íˆ ì„¤ëª…ë°›ê³  ì´í•´í•˜ì˜€ìŠµë‹ˆê¹Œ?</td>
                            <td style="width: 15%; text-align: center; border-right: 1px solid var(--grey-300); padding: 8px;">â–¡ ì˜ˆ</td>
                            <td style="width: 15%; text-align: center; padding: 8px;">â–¡ ì•„ë‹ˆì˜¤</td>
                        </tr>
                    </table>
                    
                    <h4 style="font-size: 1rem; font-weight: 700; color: var(--grey-900); margin-top: 15px; margin-bottom: 10px;">â–  ì˜ˆê¸ˆìƒí’ˆì˜ ì¤‘ìš”í•œ ì‚¬í•­ì´ í¬í•¨ëœ ì˜ˆê¸ˆìƒí’ˆì˜ ì¤‘ìš” ë‚´ìš© ìš”ì•½</h4>
                    <ul style="list-style: disc; margin-left: 20px; font-size: 0.9rem; color: var(--grey-700); line-height: 1.6; margin-bottom: 15px;">
                        <li>ìƒí’ˆì˜ ê°œìš” (ê³„ì•½ ê¸°ê°„, ì´ìì˜ ì§€ê¸‰ ì‹œê¸° ë° ì§€ê¸‰ ë°©ì‹ ë“±)</li>
                        <li>ì´ììœ¨ ë° ì´ì ê³„ì‚° ë°©ë²•, ì¤‘ë„í•´ì§€ ì´ììœ¨ ë° ë§Œê¸° ì´ìœ¨, ì´ììœ¨ ë³€ê²½ì— ê´€í•œ ì‚¬í•­</li>
                        <li>ê³„ì•½ì´ í•´ì§€(ì˜ˆì™¸ì ìœ¼ë¡œ í•´ì§€)ë˜ê±°ë‚˜, í•´ì§€ì´ìœ¨, ì˜ˆê¸ˆì ë³´í˜¸ ì—¬ë¶€ ë° ê·¸ ë‚´ìš©</li>
                        <li>ì†ì‹¤ ë°œìƒ ìœ„í—˜, ë¯¼ì› ì²˜ë¦¬ ë° ë¶„ìŸ ì¡°ì •, ê¸ˆìœµì†Œë¹„ì ê¶Œë¦¬ ì¹¨í•´ ì‹œ êµ¬ì œ ë°©ë²•</li>
                    </ul>
                    <textarea readonly style="width: 100%; height: 100px; border: 1px solid var(--grey-300); padding: 10px; margin-top: 10px; background-color: var(--white); resize: none; font-size: 0.9rem; color: var(--grey-900); line-height: 1.4;">
                                ì´ ì˜ˆê¸ˆ ìƒí’ˆ ê³„ì•½ì„œì— ëª…ì‹œëœ ëª¨ë“  ë‚´ìš©ì„ ì¶©ë¶„íˆ ì½ê³  ì´í•´í•˜ì˜€ìœ¼ë©°, ì´ ê³„ì•½ì— ë™ì˜í•©ë‹ˆë‹¤.
                                2025ë…„ 11ì›” 10ì¼
                                ì„±ëª…(ë²•ì¸ ëŒ€í‘œ): ê¹€ìˆ˜ì§„
                                (ì¸)
                    </textarea>

                    <div class="sign-area" style="text-align: right; padding-top: 15px;">
                        <span style="font-size: 0.9rem; color: var(--grey-700);">**ì „ìì„œëª… ëŒ€ì‹ , ìœ„ ë‚´ìš©ì„ í™•ì¸í•˜ê³  ê°€ì…ì„ ì§„í–‰í•©ë‹ˆë‹¤.**</span><br>
                        <span style="font-size: 0.95rem; color: var(--grey-900); font-weight: 700;">**2025ë…„ 11ì›” 10ì¼ (ì „ì)ê¹€ìˆ˜ì§„ (ë²•ì •)ëŒ€ë¦¬ì¸**</span>
                    </div>
                </div>
            </div>
            
            <p class="confirm-question">
                ìœ„ **[ì˜ˆê¸ˆìƒí’ˆê³„ì•½ì„œ]** ë‚´ìš©ì„ ëª¨ë‘ í™•ì¸í•˜ê³ ,<br> 
                ìƒí’ˆê°€ì…ê³¼ ê´€ë ¨ëœ ê³„ì•½ì •ë³´ë¥¼ **ëª¨ë‘ í™•ì¸í•˜ê³  ì´í•´í–ˆìŒì„ ë™ì˜**í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
            </p>
            
            <div class="check-item-action toggle-group" id="modalAgreement" style="justify-content: center; margin-bottom: 20px;">
                <button type="button" class="toggle-btn" data-modal-value="Y">ì˜ˆ, ë™ì˜í•©ë‹ˆë‹¤.</button>
                <button type="button" class="toggle-btn" data-modal-value="N">ì•„ë‹ˆìš”</button>
            </div>
            
        </div>
        <div class="modal-footer">
            <button type="button" class="btn-secondary" data-modal-close="signatureModal">ì·¨ì†Œ</button>
            <button type="button" class="btn-primary" id="confirmSignatureBtn" disabled>ê°€ì…í•˜ê¸°</button>
        </div>
    </div>
</div>


    <footer>
        <section class="footer">
            <div class="container">
                </div>
        </section>
    </footer>

    <script>
        window.BASE_URL = /*[[@{/}]]*/ "/busanbank/";

        // STEP 3 ë™ì˜ ìƒíƒœ ê´€ë¦¬
        const requirements = {
            check1: false, // ì¤‘ë„í•´ì§€ ì´ììœ¨ ì´í•´ í™•ì¸
            check2: false, // ìµœì¢… ì´ììœ¨ ì´í•´ í™•ì¸
            signed: false Â // ì „ìì„œëª… ì™„ë£Œ (ëª¨ë‹¬ ë‚´ 'ì˜ˆ' ì„ íƒ ë° 'ê°€ì…í•˜ê¸°' í´ë¦­ ì™„ë£Œ)
        };
        
        const form = document.getElementById('reviewForm');
        const btnNext = document.getElementById('btnNext');
        const signStatus = document.getElementById('signStatus');
        const signatureModal = document.getElementById('signatureModal');
        const modalAgreementGroup = document.getElementById('modalAgreement'); // ëª¨ë‹¬ ë‚´ ë™ì˜ ë²„íŠ¼ ê·¸ë£¹
        const confirmSignatureBtn = document.getElementById('confirmSignatureBtn'); // ëª¨ë‹¬ ë‚´ ê°€ì…í•˜ê¸° ë²„íŠ¼

        // ------------------
        // í—¬í¼ í•¨ìˆ˜
        // ------------------
        
        // í•„ìˆ˜ í•­ëª© ì¶©ì¡± ì—¬ë¶€ ì²´í¬ ë° ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”
        function checkAllRequirements() {
            const allChecked = requirements.check1 && requirements.check2 && requirements.signed;
            
            btnNext.disabled = !allChecked;
        }

        // ëª¨ë‹¬ ë‹«ê¸° ê³µí†µ í•¨ìˆ˜
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = ''; 
        }

        // ------------------
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        // ------------------

        // ì´í•´ í™•ì¸ í† ê¸€ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (ë©”ì¸ í˜ì´ì§€ - check1, check2)
        document.querySelectorAll('.check-group .toggle-group').forEach(group => {
            group.addEventListener('click', (e) => {
                const target = e.target;
                if (target.tagName === 'BUTTON') {
                    // ëª¨ë“  ë²„íŠ¼ì—ì„œ selected í´ë˜ìŠ¤ ì œê±°
                    group.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('selected'));
                    // í´ë¦­ëœ ë²„íŠ¼ì— selected í´ë˜ìŠ¤ ì¶”ê°€
                    target.classList.add('selected');
                    
                    const checkKey = group.closest('.check-item').getAttribute('data-check');
                    
                    // 'ì˜ˆ'ë¥¼ ì„ íƒí–ˆì„ ë•Œë§Œ trueë¡œ ì„¤ì •
                    requirements[checkKey] = (target.dataset.value === 'Y');
                    
                    checkAllRequirements();
                }
            });
        });

        // ì „ìì„œëª… ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë„ìš°ê¸°
        document.getElementById('signButton').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('signatureModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // ëª¨ë‹¬ì„ ë‹¤ì‹œ ì—´ì—ˆì„ ë•Œ, ëª¨ë‹¬ ë‚´ ë²„íŠ¼ ìƒíƒœ ì´ˆê¸°í™”
            confirmSignatureBtn.disabled = true;
            modalAgreementGroup.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('selected'));
        });

        // ğŸš¨ ëª¨ë‹¬ ë‚´ ìµœì¢… ë™ì˜ 'ì˜ˆ/ì•„ë‹ˆì˜¤' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ (modalAgreement) ğŸš¨
        modalAgreementGroup.addEventListener('click', (e) => {
            const target = e.target;
            if (target.tagName === 'BUTTON') {
                // ëª¨ë‹¬ ë‚´ ëª¨ë“  ë²„íŠ¼ì—ì„œ selected í´ë˜ìŠ¤ ì œê±°
                modalAgreementGroup.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('selected'));
                // í´ë¦­ëœ ë²„íŠ¼ì— selected í´ë˜ìŠ¤ ì¶”ê°€
                target.classList.add('selected');

                // 'ì˜ˆ'ë¥¼ ì„ íƒí–ˆì„ ë•Œë§Œ ëª¨ë‹¬ ë‚´ 'ê°€ì…í•˜ê¸°' ë²„íŠ¼ í™œì„±í™”
                const isAgreed = (target.dataset.modalValue === 'Y');
                confirmSignatureBtn.disabled = !isAgreed;
            }
        });

        // ğŸš¨ ì „ìì„œëª… ëª¨ë‹¬ - 'ê°€ì…í•˜ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ğŸš¨
        confirmSignatureBtn.addEventListener('click', () => {
            requirements.signed = true;
            signStatus.innerHTML = '<strong style="color: var(--red-900);">[ì™„ë£Œ]</strong> ê³„ì•½ ë‚´ìš©ì„ í™•ì¸í•˜ê³  ê°€ì…ì— ë™ì˜í–ˆìŠµë‹ˆë‹¤.';
            closeModal('signatureModal');
            checkAllRequirements();
        });

        // ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼/ë°°ê²½ í´ë¦­ ì´ë²¤íŠ¸
        document.querySelectorAll('[data-modal-close]').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const modalId = e.target.getAttribute('data-modal-close');
                closeModal(modalId);
            });
        });
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                closeModal(e.target.id);
            }
        });

        // ğŸš¨ ìµœì¢… 'ê°€ì… ì™„ë£Œ' ë²„íŠ¼ ì œì¶œ ì²˜ë¦¬ (STEP 4ë¡œ ì´ë™) ğŸš¨
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            if (!btnNext.disabled) {
                alert("ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. STEP 4 ì™„ë£Œ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
                // STEP 4 ì™„ë£Œ í˜ì´ì§€ë¡œ ì´ë™
                window.location.href = `${window.BASE_URL}prod/productjoin/step4`;
            }
        });

        // ì´ˆê¸° ìƒíƒœ í™•ì¸
        checkAllRequirements();
    </script>
</body>
</html>